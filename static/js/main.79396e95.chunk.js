(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(20),r=a.n(l),c=(a(60),a(62),a(64),a(66),a(7)),i=a(8),s=a(11),d=a(9),u=a(12),m=a(50),p=a(23),h=a(49),f=a(10),g=a(2),b=function(){return o.a.createElement(g.NavbarNav,{right:!0},o.a.createElement(g.NavItem,{active:!0},o.a.createElement(g.NavLink,{to:"/dashboard"},"Dashboard")),o.a.createElement(g.NavItem,null,o.a.createElement(g.NavLink,{to:"/logout"},"Log Out")))},v=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={isOpen:!1},a.toggleCollapse=function(){a.setState({isOpen:!a.state.isOpen})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(g.Navbar,{color:"indigo",dark:!0,expand:"md"},o.a.createElement(g.NavbarBrand,null,o.a.createElement("strong",{className:"white-text"},"BookmanIndia")),o.a.createElement(g.NavbarToggler,{onClick:this.toggleCollapse}),o.a.createElement(g.Collapse,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},this.props.isAuthenticated?o.a.createElement(b,null):null))}}]),t}(o.a.Component),E=Object(f.b)(function(e){return{isAuthenticated:null!==e.auth.idToken}})(v),k=a(22),y=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(g.MDBContainer,null,o.a.createElement("h1",{className:"text-center mt-5 mb-5"},"Welcome to Dashboard "),o.a.createElement(g.MDBRow,{className:"mt-5"},o.a.createElement(g.MDBCol,{className:"d-flex justify-content-center"},o.a.createElement(g.MDBBtn,{className:"w-100",color:"primary"},o.a.createElement(k.a,{className:"text-white d-block",to:"/newbook"},"Add a Book"))),o.a.createElement(g.MDBCol,{className:"d-flex justify-content-center"},o.a.createElement(g.MDBBtn,{className:"w-100",color:"default"},o.a.createElement(k.a,{className:"text-white d-block",to:"/allbooks"},"Manage Books")))))}}]),t}(n.Component),O=a(36),B=a(53),D=a.n(B),A=a(37),j=a.n(A),C=function(e){return function(t){setTimeout(function(){t({type:"AUTH_LOGOUT"})},1e3*e)}},S=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),function(e){e({type:"AUTH_LOGOUT"})}},w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",password:""},a.HandleSubmit=function(e){e.preventDefault(),a.props.onAuth(a.state)},a.HandleChange=function(e){a.setState(Object(O.a)({},e.target.id,e.target.value))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=null;return this.props.isAuthenticated&&(e=o.a.createElement(h.a,{to:"/dashboard"})),o.a.createElement(g.MDBContainer,null,e,o.a.createElement("div",{className:"text-center mt-4"},o.a.createElement("img",{style:{width:"130px"},src:D.a,alt:"Logo"})),o.a.createElement(g.MDBRow,{className:"d-flex justify-content-center mt-3"},o.a.createElement(g.MDBCol,{md:"4"},o.a.createElement("form",null,o.a.createElement("p",{className:"h3 text-center mb-4"},"Sign in"),o.a.createElement("div",{className:"grey-text"},o.a.createElement(g.MDBInput,{id:"email",label:"Type your email",icon:"envelope",group:!0,type:"email",onChange:this.HandleChange}),o.a.createElement(g.MDBInput,{id:"password",label:"Type your password",icon:"lock",group:!0,type:"password",onChange:this.HandleChange})),o.a.createElement("div",{className:"text-center"},o.a.createElement(g.MDBBtn,{onClick:this.HandleSubmit},"Login"))))))}}]),t}(n.Component),M=Object(f.b)(function(e){return{isAuthenticated:null!==e.auth.idToken}},function(e){return{onAuth:function(t){return e((a=t,function(e){var t={email:a.email,password:a.password,returnSecureToken:!0};j.a.post("https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=AIzaSyChljo7cbyL9qLMLU2doBAcBlAJXjhsRJE",t).then(function(t){var a=new Date((new Date).getTime()+1e3*t.data.expiresIn);localStorage.setItem("token",t.data.idToken),localStorage.setItem("expirationDate",a),localStorage.setItem("userId",t.data.localId),e({type:"AUTH_SUCCESS",idToken:t.data.idToken,localId:t.data.localId}),e(C(t.data.expiresIn))}).catch(function(t){e({type:"AUTH_FAIL",error:t})})}));var a}}})(w),N=a(38),I=a.n(N),T=j.a.create({baseURL:"https://bmiadmin.firebaseio.com/"}),H=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",isbn:-1,pdf:"",videoname:[],video:[]},a.HandleSubmit=function(e){e.preventDefault(),console.log(a.props),a.props.addBook({name:a.state.name,isbn:a.state.isbn,pdf:a.state.pdf,videoname:a.state.videoname,video:a.state.video},a.props.token)},a.HandleAddISBN=function(e){a.setState({isbn:parseInt(e.target.value)})},a.HandleAddPdf=function(e){a.setState({pdf:e.target.value})},a.HandleAddName=function(e){a.setState({name:e.target.value})},a.HandleAddVideo=function(e){a.setState({video:e.target.value.split(",")})},a.HandleAddVideoName=function(e){a.setState({videoname:e.target.value.split(",")})},a.HandleClose=function(){a.props.Modal()},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=o.a.createElement("h3",{style:{color:"#adadad",marginTop:"30vh",textAlign:"center"}},"QR Code");return-1!==this.state.isbn&&(e=o.a.createElement(I.a,{size:520,value:String(this.state.isbn)})),o.a.createElement(g.MDBContainer,null,o.a.createElement(g.MDBRow,{className:"d-flex justify-content-center mt-3"},o.a.createElement(g.MDBCol,{md:"6"},o.a.createElement("form",null,o.a.createElement("p",{className:"h3 text-center mb-4"},"Add New Book"),o.a.createElement("div",{className:"grey-text"},o.a.createElement(g.MDBInput,{id:"name",label:"Type Book Name",group:!0,type:"text",onChange:this.HandleAddName}),o.a.createElement(g.MDBInput,{id:"isbn",label:"Type ISBN",group:!0,type:"number",onChange:this.HandleAddISBN}),o.a.createElement(g.MDBInput,{id:"pdf",label:"Type PDF Link",group:!0,type:"text",onChange:this.HandleAddPdf}),o.a.createElement(g.MDBInput,{type:"textarea",id:"videoName",label:"Type Video(s) Name",group:!0,onChange:this.HandleAddVideoName}),o.a.createElement(g.MDBInput,{type:"textarea",id:"video",label:"Type Video(s) Link",group:!0,onChange:this.HandleAddVideo})),o.a.createElement("div",{className:"text-center"},o.a.createElement(g.MDBBtn,{onClick:this.HandleSubmit},"Add")))),o.a.createElement(g.MDBCol,{md:"6",style:{textAlign:"center"}},e)),this.props.message?o.a.createElement(g.Modal,{isOpen:!0,toggle:this.HandleClose,size:"sm"},o.a.createElement(g.ModalHeader,{toggle:this.HandleClose},this.state.name),o.a.createElement(g.ModalBody,{style:{textAlign:"center"}},this.props.message),o.a.createElement(g.ModalFooter,null,o.a.createElement(g.Button,{color:"secondary",onClick:this.HandleClose},"Close"))):null)}}]),t}(n.Component),x=Object(f.b)(function(e){return{token:e.auth.idToken,message:e.book.responseMessage}},function(e){return{addBook:function(t,a){return e(function(e,t){return function(a){console.log(t),T.post("/books.json?auth="+t,e).then(function(e){a({type:"ADD_BOOK",msg:"Book Added"})}).catch(function(e){return a({type:"ADD_BOOK_FAIL",msg:"Failed"})})}}(t,a))},Modal:function(){return e(function(e){e({type:"CLOSE_MODAL"})})}}})(H),L=a(32),_=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return o.a.createElement(h.a,{to:"/"})}}]),t}(n.Component),U=Object(f.b)(null,function(e){return{onLogout:function(){return e(S())}}})(_),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={modal:!1,keySave:null,name:"",isbn:-1,pdf:"",videoname:[],video:[]},a.HandleAddISBN=function(e){a.setState({isbn:e.target.value})},a.HandleAddPdf=function(e){a.setState({pdf:e.target.value})},a.HandleAddName=function(e){a.setState({name:e.target.value})},a.HandleAddVideo=function(e){a.setState({video:e.target.value.split(",")})},a.HandleAddVideoName=function(e){console.log(e.target.value),a.setState({videoname:e.target.value.split(",")})},a.HandleDelete=function(e){T.delete("/books/".concat(e,".json?auth=").concat(a.props.token)).then(function(e){return a.props.getAllBooks()}).catch(function(e){return console.log(e)})},a.HandleInfo=function(e){T.get("/books/".concat(e,".json")).then(function(t){return a.setState({keySave:e,modal:!a.state.modal,name:t.data.name,isbn:t.data.isbn,pdf:t.data.pdf,videoname:t.data.videoname,video:t.data.video})}).catch(function(e){return console.log(e)})},a.HandleSave=function(){T.patch("/books/".concat(a.state.keySave,".json?auth=").concat(a.props.token),{name:a.state.name,isbn:a.state.isbn,pdf:a.state.pdf,videoname:a.state.videoname,video:a.state.video}).then(function(e){a.props.getAllBooks(),a.setState({modal:!1})}).catch(function(e){return console.log(e)})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllBooks()}},{key:"render",value:function(){var e=this;console.log(this.state);var t=null;this.props.booksData&&(t=Object.keys(this.props.booksData).map(function(t,a){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,a+1),o.a.createElement("td",null,e.props.booksData[t].name),o.a.createElement("td",null,e.props.booksData[t].isbn),o.a.createElement("td",null,o.a.createElement("a",{href:e.props.booksData[t].pdf},"Book Link")),o.a.createElement("td",null,e.props.booksData[t].video.map(function(a,n){return o.a.createElement("p",{key:a},o.a.createElement("a",{href:a},e.props.booksData[t].videoname[n]))})),o.a.createElement("td",null,o.a.createElement(g.MDBBtn,{color:"info",onClick:function(){return e.HandleInfo(t)}},"Edit"),o.a.createElement(g.MDBBtn,{color:"danger",onClick:function(){return e.HandleDelete(t)}},"Delete")))}));var a=o.a.createElement("h3",{style:{color:"#adadad",marginTop:"30vh",textAlign:"center"}},"QR Code");return-1!==this.state.isbn&&(a=o.a.createElement(I.a,{size:520,value:String(this.state.isbn)})),o.a.createElement("div",null,o.a.createElement("h1",{className:"text-center mt-5 mb-5"},"Manage Books"),this.props.booksData?o.a.createElement(g.Table,{striped:!0,style:{margin:"auto",width:"80%",textAlign:"center"}},o.a.createElement(g.TableHead,{color:"default-color",textWhite:!0},o.a.createElement("tr",null,o.a.createElement("th",null,"S.No."),o.a.createElement("th",null,"NAME"),o.a.createElement("th",null,"ISBN"),o.a.createElement("th",null,"PDF"),o.a.createElement("th",null,"VIDEO(S)"),o.a.createElement("th",null,"Modify"))),o.a.createElement(g.TableBody,null,t)):o.a.createElement("h1",{style:{marginTop:"200px",textAlign:"center"}},"Please wait ..."),o.a.createElement(g.Modal,{isOpen:this.state.modal,toggle:function(){return e.setState({modal:!e.state.modal})},size:"fluid"},o.a.createElement(g.ModalHeader,{toggle:function(){return e.setState({modal:!e.state.modal})}},this.state.name),o.a.createElement(g.ModalBody,null,o.a.createElement(g.MDBContainer,null,o.a.createElement(g.MDBRow,{className:"d-flex justify-content-center"},o.a.createElement(g.MDBCol,{md:"6"},o.a.createElement("form",null,o.a.createElement("div",{className:"grey-text"},o.a.createElement(g.MDBInput,{id:"name",label:"Type Book Name",group:!0,value:this.state.name,onChange:this.HandleAddName,type:"text"}),o.a.createElement(g.MDBInput,{id:"isbn",label:"Type ISBN",group:!0,value:this.state.isbn,type:"number",onChange:this.HandleAddISBN}),o.a.createElement(g.MDBInput,{id:"pdf",label:"Type PDF Link",group:!0,value:this.state.pdf,type:"text",onChange:this.HandleAddPdf}),o.a.createElement(g.MDBInput,{type:"textarea",id:"videoName",label:"Type Video(s) Name",group:!0,value:this.state.videoname.join(","),onChange:this.HandleAddVideoName}),o.a.createElement(g.MDBInput,{type:"textarea",id:"video",label:"Type Video(s) Link",group:!0,value:this.state.video.join(","),onChange:this.HandleAddVideo})))),o.a.createElement(g.MDBCol,{md:"6",style:{textAlign:"center"}},a)))),o.a.createElement(g.ModalFooter,null,o.a.createElement(g.Button,{color:"secondary",onClick:function(){return e.setState({modal:!e.state.modal})}},"Close"),o.a.createElement(g.Button,{color:"primary",onClick:this.HandleSave},"Save changes"))))}}]),t}(n.Component),F=Object(f.b)(function(e){return{booksData:e.book.books,token:e.auth.idToken}},function(e){return{getAllBooks:function(){return e(function(e){T.get("/books.json").then(function(t){e({type:"GET_BOOKS",books:t.data})}).catch(function(e){return console.log(e)})})}}})(V),P=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoLogin()}},{key:"render",value:function(){var e=o.a.createElement(m.a,null,o.a.createElement(p.a,{exact:!0,path:"/",component:M}),o.a.createElement(h.a,{to:"/"}));return this.props.isAuthenticated&&(e=o.a.createElement(m.a,null,o.a.createElement(p.a,{path:"/dashboard",component:y}),o.a.createElement(p.a,{path:"/newbook",component:x}),o.a.createElement(p.a,{path:"/allbooks",component:F}),o.a.createElement(p.a,{path:"/logout",component:U}),o.a.createElement(h.a,{to:"/dashboard"}))),o.a.createElement(L.a,{basename:"/bmiadmin"},o.a.createElement("div",{className:"App"},o.a.createElement(E,null),e))}}]),t}(n.Component),R=Object(f.b)(function(e){return{isAuthenticated:null!==e.auth.idToken}},function(e){return{onTryAutoLogin:function(){return e(function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));a<=new Date?e(S()):(e({type:"AUTH_SUCCESS",idToken:t,localId:localStorage.getItem("userId")}),e(C((a.getTime()-(new Date).getTime())/1e3)))}else e(S())})}}})(P),K=a(15),W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var G=a(14),J={idToken:null,userId:null,error:null},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_SUCCESS":return Object(G.a)({},e,{idToken:t.idToken,userId:t.localId});case"AUTH_FAIL":return Object(G.a)({},e,{error:t.error});case"AUTH_LOGOUT":return Object(G.a)({},e,{idToken:null,userId:null});default:return e}},q={books:null,responseMessage:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BOOK":case"ADD_BOOK_FAIL":return console.log(t.msg),Object(G.a)({},e,{responseMessage:t.msg});case"GET_BOOKS":return console.log(t.books),Object(G.a)({},e,{books:t.books});case"CLOSE_MODAL":return Object(G.a)({},e,{responseMessage:null});default:return e}},$=Object(K.c)({auth:Q,book:X}),Y=a(54),Z=Object(K.d)($,Object(K.a)(Y.a));r.a.render(o.a.createElement(f.a,{store:Z},o.a.createElement(R,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/bmiadmin",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/bmiadmin","/service-worker.js");W?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):z(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):z(e)})}}()},53:function(e,t,a){e.exports=a.p+"static/media/bmi.7f9360d8.png"},55:function(e,t,a){e.exports=a(114)},66:function(e,t,a){}},[[55,2,1]]]);
//# sourceMappingURL=main.79396e95.chunk.js.map